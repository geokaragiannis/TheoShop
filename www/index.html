<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name=”viewport” content=”initial-scale=1, width=device-width, height=device-height, viewport-fit=cover”>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>TheoShop</title>
  <link rel="stylesheet" href="css/framework7.ios.min.css">
  <link rel="stylesheet" href="css/framework7.ios.colors.min.css">
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/framework7-icons/css/framework7-icons.css">
</head>
<body>
  <div id="app">
    <!-- Statusbar -->
    <!-- NOTE: You may need to comment out the next line depending on what device you're running on and see the app title cut off -->
     <!-- <f7-statusbar></f7-statusbar> -->

    <!-- CVC popover -->
    <div class="popover popover-cvc">
     <div class="popover-angle"></div>
     <div class="popover-inner">
       <div class="content-block">
         <p>The 3-digit code on the back of your card</p>

       </div>
     </div>
   </div>


     <div class="popup popup-card">
       <div class="block">
         <f7-preloader v-if="preloader" color="blue" size="50px" class="main-preloader"></f7-preloader>
         <h2 class="popup-title">Checkout</h2>
         <h2 class="popup-title">Final Amount: {{cart_price}}</h2>

         <f7-list inline-labels inset no-hairlines-between class="profile-list" >
           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="person" slot="media"></f7-icon>
             <f7-label>Name</f7-label>
             <f7-input id="card-name" type="text" placeholder="name on card" :value="name" clear-button></f7-input>
           </f7-list-item>

           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="home" slot="media"></f7-icon>
             <f7-label>Address</f7-label>
             <f7-input id="card-address" type="text" placeholder="billing address" :value="address" clear-button></f7-input>
           </f7-list-item>
           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="compass" slot="media"></f7-icon>
             <f7-label>City</f7-label>
             <f7-input id="card-city" type="text" placeholder="City" :value="city" clear-button></f7-input>
           </f7-list-item>
           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="world" slot="media"></f7-icon>
             <f7-label>State</f7-label>
             <f7-input id="card-state" type="text" placeholder="State" :value="state" clear-button></f7-input>
           </f7-list-item>
           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="flag" slot="media"></f7-icon>
             <f7-label>Zip Code</f7-label>
             <f7-input id="card-zip" type="number" placeholder="zip code" :value="zip" clear-button></f7-input>
           </f7-list-item>

           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="card" slot="media"></f7-icon>
             <f7-label>Card</f7-label>
             <f7-input id="card-card_num" type="number" placeholder="card number" :value="card_num" clear-button></f7-input>
           </f7-list-item>

           <f7-list-item class="profile-page-list-item">
             <f7-icon f7="lock" slot="media"></f7-icon>
             <f7-label>CVC</f7-label>
             <f7-input id="card-cvc" number type="number" placeholder="cvc number" :value="cvc" clear-button> </f7-input>
             <a class="link open-popover" href="#" data-popover=".popover-cvc"> <i class="icon f7-icons" style="font-size:20px"> info </i> </a>
           </f7-list-item>

           <li class="profile-page-list-item">
              <div class="item-content">
                 <div class="item-media"><i class="icon f7-icons">calendar</i></div>
                <div class="item-inner">
                  <div class="item-title label">Expires</div>
                  <div class="item-input">
                    <input type="text" placeholder="expiration date" readonly id="picker-date">
                  </div>
                </div>
              </div>
            </li>

           <!-- Date time-->



         </f7-list>

         <div class="row inset list-block">
           <div class="col-50">
             <f7-button big class="profile-button">
               <p class="inside-profile-change-button" v-on:click="submit_card()"> Submit </p>
             </f7-button>
           </div>
           <div class="col-50">
             <f7-button v-on:click="reset_card_data()" big class="profile-button close-popup">
               <a href="#" style="color: white;" class="close-popup" v-on:click="reset_card_data()">Cancel</a>
             </f7-button>
           </div>
         </div>
       </div>
     </div>


    <f7-panel left reveal layout="dark">
      <f7-view id="left-panel-view" navbar-through :dynamic-navbar="true">
        <f7-navbar title="Left Panel"></f7-navbar>
        <f7-pages>
          <f7-page>

            <f7-list>
              <f7-list-item link="/profile-page/" title="Profile" link-view="#main-view" link-close-panel></f7-list-item>
              <f7-list-item link="/cart/" title="Shopping Cart" link-view="#main-view" link-close-panel></f7-list-item>
              <f7-list-item link="/stores/" title="Stores" link-view="#main-view" link-close-panel></f7-list-item>
            </f7-list>
          </f7-page>
        </f7-pages>
      </f7-view>
    </f7-panel>
    <!-- Main Views -->


    <!-- Login Screen -->
    <f7-views>
      <f7-view main id="main-view">
        <f7-pages>
          <f7-page class="load-screen">
            <f7-preloader color="blue" size="50px" class="main-preloader"></f7-preloader>
          </f7-page>
        </f7-pages>
      </f7-view>
    </f7-views>
  </div>

  <!-- Select Store Page  -->

  <template id="select-store-page">
    <f7-page>
      <f7-page-content style="margin-right: 15px; margin-left: 15px">
        <div class="row" style="padding-top: 20px">
          <h2 class="col"> Select a Store </h2>
          <h2> <a style="color:inherit; " class="h2 col" href="/stores/"> View on a Map </a>  </h2>
        </div>
        <f7-list class="select-list" >
    <!-- Additional "radio" prop to enable radio list item -->
          <f7-list-item v-for="store in stores_list" @change="store_selected = $event.target.value" radio :value="store.cd" :name="store.name" :title="store.name"></f7-list-item>
          <a v-on:click="goToMain()" class="button button-big button-fill select-store-button">Go</a>
        </f7-list>
        <f7-preloader v-if="button_pressed" color="blue" size="50px" class="main-preloader"></f7-preloader>

      </f7-page-content>
    </f7-page>


  </template>

  <template id="login-page">
    <f7-page v-if="!logged_in" @page:init="makeMap" login-screen>
      <f7-login-screen-title>Login</f7-login-screen-title>
      <f7-list form>
        <f7-list-item>
          <f7-label>Username</f7-label>
          <f7-input name="username" placeholder="Username" type="text"></f7-input>
        </f7-list-item>
        <f7-list-item>
          <f7-label>Password</f7-label>
          <f7-input name="password" type="password" placeholder="Password"></f7-input>
        </f7-list-item>
      </f7-list>
      <f7-list>
        <f7-list-button title="Sign In" link='/main/'></f7-list-button>
        <f7-list-label>
          <p>Click Sign In to close Login Screen</p>
        </f7-list-label>
      </f7-list>
    </f7-page>
  </template>


  <!-- Main Page -->

  <template id="page-main">
    <f7-page data-page="main">

      <!-- <f7-navbar title="Main" back-link="Back" sliding></f7-navbar> -->
      <div class="row row-main-1">
        <div class="side-menu-div">
          <a href="#" data-panel="left" class="color-white open-panel icon-only link" id="panel-icon">
            <i class="icon f7-icons" style="font-size: 5vh">bars</i></a>
        </div>
        <hr align="left" style="margin: 0 36px 0 36px" width="100%">
        <div style="width: 100%">
          <h2 class="main-text deepshadow"> Welcome to Fournos Theofilos </h2>
        </div>
      </div>

      <div>
        <div class="block block-main">
          <div class="row row-main-2">
            <f7-button button-big button-raised href="/profile-page/" class="col button-main ">
              <i class="f7-icons inside-button-main inside-button-main-i">person</i>
              <p class="inside-button-main inside-button-main-p"> Profile </p>
            </f7-button>
            <f7-button button-big button-raised href="/stores/" class="col button-main">
              <i class="f7-icons inside-button-main inside-button-main-i">compass</i>
              <p class="inside-button-main inside-button-main-p"> Stores </p>
            </f7-button>
          </div>
          <div class="row-main-3 row">
            <f7-button v-on:click="goToSubMenu(0)" href="/sub-menu/" button-big button-raised class="col-100 button-main">
              <i class="f7-icons inside-button-main inside-button-main-i"> book</i>
              <p class="inside-button-main inside-button-main-p"> Menu </p>
            </f7-button>

          </div>
        </div>
      </div>
      <!-- List of Items -->

      <!-- <f7-button class="main-page-button" text='Order Now' v-on:click="goToSubMenu(0)" href="/sub-menu/" round big fill> </f7-button>  -->

    </f7-page>

  </template>

  <!--  SUB MENU HERE -------------------->

  <template id="sub-menu">

    <f7-page style="background: #ffffff" @page:back="backSubMenu()">

      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a v-on:click="backSubMenu()" href="#" class="link white">
              <i class="icon f7-icons">chevron-left</i>
              <!-- Back link text rendered only for iOS theme -->
              <span>Back</span>
            </a>
          </div>
          <div class="center white"> {{sub_menu_navbar_title}} </div>
          <div class="right"> </div>
        </div>
      </div>

      <f7-fab href="/cart/">
        <f7-icon id="floating-button-icon" f7="icon-bag">
          <f7-badge id="floating-button-badge" v-if="number_cart_items != 0" color="red">{{number_cart_items}}</f7-badge>
        </f7-icon>
      </f7-fab>

      <f7-page-content>

        <f7-list class="sub-menu-list" media-list no-hairlines-between='true' inset >
          <f7-list-group v-for="par in parent_list">

            <f7-list-item group-title> {{par.descr}} </f7-list-item>

            <div v-for="child in par.child">
              <f7-list-item v-if="child.isLeaf == 0" :title='child.descr' v-on:click='goToSame(child)'>
                <div slot='content-start'>
                  <img v-if="child.descr === 'COFFEE'" class='parent-items-img padding-img' src="img/cap.jpg" slot='content-start'>
                  <img v-else class='parent-items-img padding-img' src="img/pizza.png" slot='content-start'>
                </div>
              </f7-list-item>
              <f7-list-item v-else :title='child.descr' :after="child.price" v-on:click='goToFinal(child)' link="final-page">
                <div slot='content-start'>
                  <img class='parent-items-img padding-img' src="img/cap.jpg" slot='content-start'> </img>
                </div>
                <!-- <img src="data:image/png;base64, base64 string here "> </img> -->

              </f7-list-item>
            </div>

        </f7-list>
      </f7-page-content>
    </f7-page>

  </template>

  <!-- FINAL PAGE -->

  <template id='final-page'>
    <f7-page @page:back="backFinal()">
      <!-- <f7-navbar title='Final Page' sliding back-link="Back"></f7-navbar> -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a class="link back white">
              <i class="icon f7-icons">chevron-left</i>
              <!-- Back link text rendered only for iOS theme -->
              <span>Back</span>
            </a>
          </div>
          <div class="center white"> {{item_pressed.descr}} </div>
          <div class="right"> </div>
        </div>
      </div>

      <f7-toolbar class="final-page-toolbar">
        <div class="toolbar-inner">
          <div id='toolbar-usd'>
            <a class='toolbar-a' href='#'> $ {{Math.trunc((quantity * (price + size_price)) * 100) / 100 }}</a>
          </div>
          <div v-on:click="add_to_cart()" id='toolbar-add'>
            <a class='toolbar-a' href='#'> Add To Cart</a>
          </div>
        </div>
      </f7-toolbar>

      <f7-page-content>
        <f7-list inset class='final-page-list'>
          <div class="card demo-card-header-pic" style="box-shadow: 3px 6px 10px;">
            <div id="demo1" class="card-header align-items-flex-end">
              <img class="final-page-image" src="img/pizza.png"> </img>
              <p class="card-image-title">
                {{item_pressed.descr}}
              </p>
            </div>
          </div>

          <div v-for="cat in item_pressed.child">
            <!-- <h2 class="custom-header"> {{cat.descr}} </h2> -->
            <f7-block style="padding:0; box-shadow: 3px 6px 10px">
              <f7-list v-if="cat.descr === 'SIZE' " no-hairlines-between>
                <f7-list-group>
                  <f7-list-item :title="cat.descr" group-title></f7-list-item>
                  <f7-list-item v-on:click="change_size(s)" v-for="s in cat.child" radio name="size-radio">
                    <p> {{s.descr}} </p>
                    <p class='extra-price-size' v-if="s.price !== null"> + {{s.price}} </p>
                  </f7-list-item>
                </f7-list-group>
              </f7-list>

              <f7-list v-else>
                <f7-list-group>
                  <f7-list-item :title="cat.descr" group-title></f7-list-item>
                  <f7-list-item v-for="s in cat.child">
                    <div class="row" style="width: 100%">
                      <div class="col-55 row">
                        <p style="width: 80%" class="extra-descr">{{s.descr}} </p>
                        <p v-if="s.price !== null" style="width: 20%" class="extra-price-size"> + {{s.price}}</p>
                      </div>
                      <div class="row add-delete-buttons-div" style="width:130px">
                        <a v-on:click="change_extras_quantity(s, -1)" class="button button-round button-fill col-40 extra-delete-button" style="width: 50px">
                          <i class="icon f7-icons col" id="extra-delete"> delete </i>
                        </a>
                        <p class="col-10" style="width: 20px; margin: 0; text-align: center; line-height: 30px"> {{s.quant}} </p>
                        <a v-on:click="change_extras_quantity(s, 1)" class="button button-round button-fill col-40 extra-add-button" style="width: 50px">
                          <i class="icon f7-icons col" id="extra-add"> add </i>
                        </a>
                      </div>
                    </div>
                  </f7-list-item>
                </f7-list-group>
              <f7-list>

            </f7-block>
          </div>

          <!-- Quantity -->
          <f7-block style="padding:0; box-shadow: 3px 6px 10px">
            <f7-list>
              <f7-list-group>
                <f7-list-item title="QUANTITY" group-title></f7-list-item>
                <f7-list-item>
                  <div class="row" style="width: 100%">
                    <div class="col-55">
                      <p class="extra-descr">Quantity </p>
                    </div>
                    <div class="row add-delete-buttons-div" style="width: 130px">
                      <a v-on:click="change_quantity(-1)" class="button button-round button-fill col-40 extra-delete-button" style="width: 50px">
                        <i class="icon f7-icons col" id="extra-delete"> delete </i>
                      </a>
                      <p class="col-10" style="width: 20px; margin: 0; text-align: center;"> {{quantity}} </p>
                      <a v-on:click="change_quantity(1)" class="button button-round button-fill col-40 extra-add-button" style="width: 50px">
                        <i class="icon f7-icons col" id="extra-add"> add </i>
                      </a>
                    </div>
                </f7-list-item>
              </f7-list-group>
            <f7-list>
          </f7-block>

        </f7-list>
      </f7-page-content>
    </f7-page>
  </template>

  <template id="cart">
    <f7-page>
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a class="link back white">
              <i class="icon f7-icons">chevron-left</i>
              <!-- Back link text rendered only for iOS theme -->
              <span>Back</span>
            </a>
          </div>
          <div class="center white"> Shopping Cart </div>
          <div class="right"> </div>
        </div>
      </div>

      <f7-fab v-if="cart_items.length !== 0" id="floating-button-continue" v-on:click="go_to_checkout()">
        <f7-icon position="right-bottom">
          Continue
        </f7-icon>
      </f7-fab>

      <f7-fab v-if="cart_items.length !== 0" id="floating-button-price" >
        <f7-icon>
          $ {{cart_price}}
        </f7-icon>
      </f7-fab>

      <f7-page-content>

        <div class="no-items-in-cart" v-if="cart_items.length === 0">
          <h2> No Items In Your Cart </h2>
        </div>

        <f7-list class='cart-list' no-hairlines-between inset >
          <f7-block class="cart-block" v-for="item in cart_items">
            <div class="row">
              <div class="col-40">
                <img class='cart-items-img' src="img/cap.jpg"> </img>
              </div>
              <div class="col-60 cart-item-div">
                <p class="cart-title">{{item.descr}}</p>
                <p class="cart-item-p"> x {{item.quant}}</p>
                <p class="cart-item-p"> {{item.size}}</p>
                <div v-for="extra in item.extras">
                  <p class="cart-item-p"> {{extra.descr}} x {{extra.quant}} </p>
                </div>
                <p class="cart-item-p"> $ {{item.total_price}} </p>
                <div class="row add-delete-buttons-div" style="width: 150px; padding-bottom: 20px">
                  <a v-on:click="change_quantity(-1, item._idx)" class="button button-round button-fill col-50 extra-delete-button" style="width: 50px">
                    <i class="icon f7-icons col" id="extra-delete"> delete </i>
                  </a>
                  <a v-on:click="change_quantity(1, item._idx)" class="button button-round button-fill col-50 extra-add-button" style="width: 50px">
                    <i class="icon f7-icons col" id="extra-add"> add </i>
                  </a>
                </div>
              </div>
            </div>
          </f7-block>
        </f7-list>
      </f7-page-content>
    </f7-page>
  </template>

  <template id="checkout-page">

    <f7-page>
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a class="link back white">
              <i class="icon f7-icons">chevron-left</i>
              <!-- Back link text rendered only for iOS theme -->
              <span>Back</span>
            </a>
          </div>
          <div class="center white"> Shopping Cart </div>
          <div class="right"> </div>
        </div>
      </div>

      <f7-page-content>


     </f7-page-content>



    </f7-page>

  </template>

  <!---               Profile Page                     --------->


  <template id="profile-page">
    <f7-page>

      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a class="link back white">
              <i class="icon f7-icons">chevron-left</i>
              <!-- Back link text rendered only for iOS theme -->
              <span>Back</span>
            </a>
          </div>
          <div class="center white"> Your Profile </div>
          <div class="right"> </div>
        </div>
      </div>

      <f7-list inline-labels inset no-hairlines-between class="profile-list" :disabled="disabled_data">
        <f7-list-item class="profile-page-list-item">
          <f7-icon f7="person" slot="media"></f7-icon>
          <f7-label>Name</f7-label>
          <f7-input id="name-input" type="text" placeholder="Your name" :value="name" clear-button></f7-input>
        </f7-list-item>

        <f7-list-item class="profile-page-list-item">
          <f7-icon f7="email" slot="media"></f7-icon>
          <f7-label>E-mail</f7-label>
          <f7-input id="email-input" type="email" placeholder="Your e-mail" :value="email" clear-button></f7-input>
        </f7-list-item>

        <f7-list-item class="profile-page-list-item">
          <f7-icon f7="phone" slot="media"></f7-icon>
          <f7-label>Phone</f7-label>
          <f7-input id="phone-input" type="tel" placeholder="Your phone number" :value="phone" clear-button></f7-input>
        </f7-list-item>

        <f7-list-item class="profile-page-list-item">
          <f7-icon f7="persons" slot="media"></f7-icon>
          <f7-label>Gender</f7-label>
          <f7-input id="gender-input" type="select" placeholder="Please choose..." :value="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </f7-input>
        </f7-list-item>

        <li class="profile-page-list-item">
           <div class="item-content">
             <div class="item-media"><i class="icon f7-icons">calendar</i></div>
             <div class="item-inner">
               <div class="item-title label">Birth date</div>
               <div class="item-input">
                 <input type="date" placeholder="Birth day" :value="birthday">
               </div>
             </div>
           </div>
         </li>

        <!-- <f7-list-item class="profile-page-list-item">
          <f7-icon f7="calendar" slot="media"></f7-icon>
          <f7-label>Birthday</f7-label>
          <f7-input id="birthday-input" type="date" placeholder="Please choose..." :value="birthday"></f7-input>
        </f7-list-item> -->

      </f7-list>

      <div class="row inset list-block">
        <div class="col-50">
          <f7-button big class="profile-button">
            <p class="inside-profile-change-button" v-on:click="profileChange()" v-if="disabled_data"> Change </p>
            <p class="inside-profile-change-button" v-on:click="profileCancel()" v-else> Cancel </p>
          </f7-button>
        </div>
        <div class="col-50">
          <f7-button big class="profile-button" v-if="!disabled_data" v-on:click="profileSave()" back>
            <p class="inside-profile-change-button"> Save </p>
         </f7-button>
        </div>
      </div>

    </f7-page>
  </template>

  <!--    STORES    -->

  <template id="stores">
    <f7-page style="background: #ffffff" name="stores" @page:init="loadMap()" @page:back="backStores()">

      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a v-on:click="backStores()" class="link back white">
              <i class="icon f7-icons">chevron-left</i>
              <!-- Back link text rendered only for iOS theme -->
              <span>Back</span>
            </a>
          </div>
          <div class="center white"> Map </div>
          <div class="right"> </div>
        </div>
      </div>


      <!-- <f7-button style="margin-top: 100px" id='map_button' v-on:click="loadMap()"> Load Map </f7-button> -->

    </f7-page>

  </template>



  <!-- Dynamic Routing Page Template -->
  <template id="page-dynamic-routing">
    <f7-page>
      <f7-navbar title="Dynamic Route" back-link="Back" sliding></f7-navbar>
      <f7-block inner>
        <ul>
          <li><b>Url:</b> {{$route.url}}</li>
          <li><b>Path:</b> {{$route.path}}</li>
          <li><b>Hash:</b> {{$route.hash}}</li>
          <li><b>Params:</b>
            <ul>
              <li v-for="(value, key) in $route.params"><b>{{key}}:</b> {{value}}</li>
            </ul>
          </li>
          <li><b>Query:</b>
            <ul>
              <li v-for="(value, key) in $route.query"><b>{{key}}:</b> {{value}}</li>
            </ul>
          </li>
          <li><b>Route:</b> {{$route.route}}</li>
        </ul>
      </f7-block>
      <f7-block inner>
        <f7-link @click="$router.back()">Go back via Router API</f7-link>
      </f7-block>
    </f7-page>
  </template>

  <script src="cordova.js"></script>
  <script src="js/framework7.min.js"></script>
  <script src="js/vue.min.js"></script>
  <script src="js/framework7-vue.min.js"></script>
  <script src="js/sha.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
